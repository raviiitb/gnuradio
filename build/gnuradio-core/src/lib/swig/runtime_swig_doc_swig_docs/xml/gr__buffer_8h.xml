<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.7.6.1">
  <compounddef id="gr__buffer_8h" kind="file">
    <compoundname>gr_buffer.h</compoundname>
    <includes local="no">gr_core_api.h</includes>
    <includes refid="gr__runtime__types_8h" local="no">gr_runtime_types.h</includes>
    <includes local="no">boost/weak_ptr.hpp</includes>
    <includes local="no">gruel/thread.h</includes>
    <includes refid="gr__tags_8h" local="no">gr_tags.h</includes>
    <includes local="no">deque</includes>
    <incdepgraph>
      <node id="95">
        <label>boost/shared_ptr.hpp</label>
      </node>
      <node id="98">
        <label>gr_complex.h</label>
        <link refid="gr__complex_8h"/>
        <childnode refid="99" relation="include">
        </childnode>
      </node>
      <node id="94">
        <label>gr_types.h</label>
        <link refid="gr__types_8h"/>
        <childnode refid="92" relation="include">
        </childnode>
        <childnode refid="95" relation="include">
        </childnode>
        <childnode refid="96" relation="include">
        </childnode>
        <childnode refid="97" relation="include">
        </childnode>
        <childnode refid="98" relation="include">
        </childnode>
      </node>
      <node id="100">
        <label>boost/weak_ptr.hpp</label>
      </node>
      <node id="101">
        <label>gruel/thread.h</label>
      </node>
      <node id="102">
        <label>gr_tags.h</label>
        <link refid="gr__tags_8h"/>
        <childnode refid="92" relation="include">
        </childnode>
        <childnode refid="103" relation="include">
        </childnode>
      </node>
      <node id="97">
        <label>stddef.h</label>
      </node>
      <node id="93">
        <label>gr_runtime_types.h</label>
        <link refid="gr__runtime__types_8h"/>
        <childnode refid="92" relation="include">
        </childnode>
        <childnode refid="94" relation="include">
        </childnode>
      </node>
      <node id="91">
        <label>/home/alexzh/gr_alex/gnuradio/gnuradio-core/src/lib/runtime/gr_buffer.h</label>
        <link refid="gr_buffer.h"/>
        <childnode refid="92" relation="include">
        </childnode>
        <childnode refid="93" relation="include">
        </childnode>
        <childnode refid="100" relation="include">
        </childnode>
        <childnode refid="101" relation="include">
        </childnode>
        <childnode refid="102" relation="include">
        </childnode>
        <childnode refid="104" relation="include">
        </childnode>
      </node>
      <node id="92">
        <label>gr_core_api.h</label>
      </node>
      <node id="96">
        <label>vector</label>
      </node>
      <node id="103">
        <label>gruel/pmt.h</label>
      </node>
      <node id="104">
        <label>deque</label>
      </node>
      <node id="99">
        <label>complex</label>
      </node>
    </incdepgraph>
    <innerclass refid="classgr__buffer" prot="public">gr_buffer</innerclass>
    <innerclass refid="classgr__buffer__reader" prot="public">gr_buffer_reader</innerclass>
      <sectiondef kind="func">
      <memberdef kind="function" id="gr__buffer_8h_1aa2ef769ebce37b086c366d798c096307" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>GR_CORE_API <ref refid="gr__runtime__types_8h_1aeb2e4f10d678dfe34cb51aadd956f988" kindref="member">gr_buffer_sptr</ref></type>
        <definition>GR_CORE_API gr_buffer_sptr gr_make_buffer</definition>
        <argsstring>(int nitems, size_t sizeof_item, gr_block_sptr link=gr_block_sptr())</argsstring>
        <name>gr_make_buffer</name>
        <param>
          <type>int</type>
          <declname>nitems</declname>
        </param>
        <param>
          <type>size_t</type>
          <declname>sizeof_item</declname>
        </param>
        <param>
          <type><ref refid="gr__runtime__types_8h_1a0e2b009a3179d6dc1131742e185f910b" kindref="member">gr_block_sptr</ref></type>
          <declname>link</declname>
          <defval><ref refid="gr__runtime__types_8h_1a0e2b009a3179d6dc1131742e185f910b" kindref="member">gr_block_sptr</ref>()</defval>
        </param>
        <briefdescription>
<para>Allocate a buffer that holds at least <computeroutput>nitems</computeroutput> of size <computeroutput>sizeof_item</computeroutput>. </para>        </briefdescription>
        <detaileddescription>
<para>The total size of the buffer will be rounded up to a system dependent boundary. This is typically the system page size, but under MS windows is 64KB.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>nitems</parametername>
</parameternamelist>
<parameterdescription>
<para>is the minimum number of items the buffer will hold. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>sizeof_item</parametername>
</parameternamelist>
<parameterdescription>
<para>is the size of an item in bytes. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>link</parametername>
</parameternamelist>
<parameterdescription>
<para>is the block that writes to this buffer. </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/alexzh/gr_alex/gnuradio/gnuradio-core/src/lib/runtime/gr_buffer.h" line="46"/>
      </memberdef>
      <memberdef kind="function" id="gr__buffer_8h_1a9bb17a1adf0efc0fcbdb6c208ca62df1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>GR_CORE_API <ref refid="gr__runtime__types_8h_1abede94b9a0e48fee7725bb4113b1e5f7" kindref="member">gr_buffer_reader_sptr</ref></type>
        <definition>GR_CORE_API gr_buffer_reader_sptr gr_buffer_add_reader</definition>
        <argsstring>(gr_buffer_sptr buf, int nzero_preload, gr_block_sptr link=gr_block_sptr())</argsstring>
        <name>gr_buffer_add_reader</name>
        <param>
          <type><ref refid="gr__runtime__types_8h_1aeb2e4f10d678dfe34cb51aadd956f988" kindref="member">gr_buffer_sptr</ref></type>
          <declname>buf</declname>
        </param>
        <param>
          <type>int</type>
          <declname>nzero_preload</declname>
        </param>
        <param>
          <type><ref refid="gr__runtime__types_8h_1a0e2b009a3179d6dc1131742e185f910b" kindref="member">gr_block_sptr</ref></type>
          <declname>link</declname>
          <defval><ref refid="gr__runtime__types_8h_1a0e2b009a3179d6dc1131742e185f910b" kindref="member">gr_block_sptr</ref>()</defval>
        </param>
        <briefdescription>
<para>Create a new <ref refid="classgr__buffer__reader" kindref="compound">gr_buffer_reader</ref> and attach it to buffer <computeroutput>buf</computeroutput>. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>buf</parametername>
</parameternamelist>
<parameterdescription>
<para>is the buffer the <computeroutput><ref refid="classgr__buffer__reader" kindref="compound">gr_buffer_reader</ref></computeroutput> reads from. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>nzero_preload</parametername>
</parameternamelist>
<parameterdescription>
<para>-- number of zero items to &quot;preload&quot; into buffer. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>link</parametername>
</parameternamelist>
<parameterdescription>
<para>is the block that reads from the buffer using this <ref refid="classgr__buffer__reader" kindref="compound">gr_buffer_reader</ref>. </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/alexzh/gr_alex/gnuradio/gnuradio-core/src/lib/runtime/gr_buffer.h" line="198"/>
      </memberdef>
      <memberdef kind="function" id="gr__buffer_8h_1a10b6ab0405112ab02f34c95e7b673929" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>GR_CORE_API long</type>
        <definition>GR_CORE_API long gr_buffer_ncurrently_allocated</definition>
        <argsstring>()</argsstring>
        <name>gr_buffer_ncurrently_allocated</name>
        <briefdescription>
<para>returns # of gr_buffers currently allocated </para>        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/alexzh/gr_alex/gnuradio/gnuradio-core/src/lib/runtime/gr_buffer.h" line="201"/>
      </memberdef>
      <memberdef kind="function" id="gr__buffer_8h_1a12660a6c74c7e961f84c2ea8e8df7543" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>GR_CORE_API long</type>
        <definition>GR_CORE_API long gr_buffer_reader_ncurrently_allocated</definition>
        <argsstring>()</argsstring>
        <name>gr_buffer_reader_ncurrently_allocated</name>
        <briefdescription>
<para>returns # of gr_buffer_readers currently allocated </para>        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/alexzh/gr_alex/gnuradio/gnuradio-core/src/lib/runtime/gr_buffer.h" line="297"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*<sp/>-*-<sp/>c++<sp/>-*-<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>2004,2009,2010,2011<sp/>Free<sp/>Software<sp/>Foundation,<sp/>Inc.</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*<sp/>This<sp/>file<sp/>is<sp/>part<sp/>of<sp/>GNU<sp/>Radio</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/>*<sp/>GNU<sp/>Radio<sp/>is<sp/>free<sp/>software;<sp/>you<sp/>can<sp/>redistribute<sp/>it<sp/>and/or<sp/>modify</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/>*<sp/>it<sp/>under<sp/>the<sp/>terms<sp/>of<sp/>the<sp/>GNU<sp/>General<sp/>Public<sp/>License<sp/>as<sp/>published<sp/>by</highlight></codeline>
<codeline lineno="9"><highlight class="comment"><sp/>*<sp/>the<sp/>Free<sp/>Software<sp/>Foundation;<sp/>either<sp/>version<sp/>3,<sp/>or<sp/>(at<sp/>your<sp/>option)</highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/>*<sp/>any<sp/>later<sp/>version.</highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="12"><highlight class="comment"><sp/>*<sp/>GNU<sp/>Radio<sp/>is<sp/>distributed<sp/>in<sp/>the<sp/>hope<sp/>that<sp/>it<sp/>will<sp/>be<sp/>useful,</highlight></codeline>
<codeline lineno="13"><highlight class="comment"><sp/>*<sp/>but<sp/>WITHOUT<sp/>ANY<sp/>WARRANTY;<sp/>without<sp/>even<sp/>the<sp/>implied<sp/>warranty<sp/>of</highlight></codeline>
<codeline lineno="14"><highlight class="comment"><sp/>*<sp/>MERCHANTABILITY<sp/>or<sp/>FITNESS<sp/>FOR<sp/>A<sp/>PARTICULAR<sp/>PURPOSE.<sp/><sp/>See<sp/>the</highlight></codeline>
<codeline lineno="15"><highlight class="comment"><sp/>*<sp/>GNU<sp/>General<sp/>Public<sp/>License<sp/>for<sp/>more<sp/>details.</highlight></codeline>
<codeline lineno="16"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="17"><highlight class="comment"><sp/>*<sp/>You<sp/>should<sp/>have<sp/>received<sp/>a<sp/>copy<sp/>of<sp/>the<sp/>GNU<sp/>General<sp/>Public<sp/>License</highlight></codeline>
<codeline lineno="18"><highlight class="comment"><sp/>*<sp/>along<sp/>with<sp/>GNU<sp/>Radio;<sp/>see<sp/>the<sp/>file<sp/>COPYING.<sp/><sp/>If<sp/>not,<sp/>write<sp/>to</highlight></codeline>
<codeline lineno="19"><highlight class="comment"><sp/>*<sp/>the<sp/>Free<sp/>Software<sp/>Foundation,<sp/>Inc.,<sp/>51<sp/>Franklin<sp/>Street,</highlight></codeline>
<codeline lineno="20"><highlight class="comment"><sp/>*<sp/>Boston,<sp/>MA<sp/>02110-1301,<sp/>USA.</highlight></codeline>
<codeline lineno="21"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>INCLUDED_GR_BUFFER_H</highlight></codeline>
<codeline lineno="24"><highlight class="preprocessor"></highlight><highlight class="preprocessor">#define<sp/>INCLUDED_GR_BUFFER_H</highlight></codeline>
<codeline lineno="25"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;gr_core_api.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="gr__runtime__types_8h" kindref="compound">gr_runtime_types.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;boost/weak_ptr.hpp&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;gruel/thread.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="gr__tags_8h" kindref="compound">gr_tags.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;deque&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classgr__vmcircbuf" kindref="compound" tooltip="abstract class to implement doubly mapped virtual memory circular buffers">gr_vmcircbuf</ref>;</highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal">GR_CORE_API<sp/><ref refid="gr__runtime__types_8h_1aeb2e4f10d678dfe34cb51aadd956f988" kindref="member">gr_buffer_sptr</ref><sp/><ref refid="gr__buffer_8h_1aa2ef769ebce37b086c366d798c096307" kindref="member" tooltip="Allocate a buffer that holds at least nitems of size sizeof_item.">gr_make_buffer</ref><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>nitems,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>sizeof_item,<sp/><ref refid="gr__runtime__types_8h_1a0e2b009a3179d6dc1131742e185f910b" kindref="member">gr_block_sptr</ref><sp/>link=<ref refid="gr__runtime__types_8h_1a0e2b009a3179d6dc1131742e185f910b" kindref="member">gr_block_sptr</ref>());</highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="53" refid="classgr__buffer" refkind="compound"><highlight class="keyword">class<sp/></highlight><highlight class="normal">GR_CORE_API<sp/><ref refid="classgr__buffer" kindref="compound" tooltip="Single writer, multiple reader fifo.">gr_buffer</ref><sp/>{</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">virtual</highlight><highlight class="normal"><sp/>~<ref refid="classgr__buffer" kindref="compound" tooltip="Single writer, multiple reader fifo.">gr_buffer</ref><sp/>();</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>space_available<sp/>();</highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="66" refid="classgr__buffer_1a39a2c75577d0b37f7eef0b930d588da4" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classgr__buffer_1a39a2c75577d0b37f7eef0b930d588da4" kindref="member" tooltip="return size of this buffer in items">bufsize</ref>()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>d_bufsize;<sp/>}</highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*write_pointer<sp/>();</highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>update_write_pointer<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>nitems);</highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>set_done<sp/>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>done);</highlight></codeline>
<codeline lineno="82" refid="classgr__buffer_1a89a1d9c85ba243e952a62015c7009d8d" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classgr__buffer_1a89a1d9c85ba243e952a62015c7009d8d" kindref="member">done</ref><sp/>()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>d_done;<sp/>}</highlight></codeline>
<codeline lineno="83"><highlight class="normal"></highlight></codeline>
<codeline lineno="87" refid="classgr__buffer_1a3e5c410222891cad5b7d5b85ff82b85f" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="gr__runtime__types_8h_1a0e2b009a3179d6dc1131742e185f910b" kindref="member">gr_block_sptr</ref><sp/><ref refid="classgr__buffer_1a3e5c410222891cad5b7d5b85ff82b85f" kindref="member" tooltip="Return the block that writes to this buffer.">link</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="gr__runtime__types_8h_1a0e2b009a3179d6dc1131742e185f910b" kindref="member">gr_block_sptr</ref>(d_link);<sp/>}</highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight></codeline>
<codeline lineno="89" refid="classgr__buffer_1a2eb5af8306fe4a2c6d6838ff41b3240b" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/><ref refid="classgr__buffer_1a2eb5af8306fe4a2c6d6838ff41b3240b" kindref="member">nreaders</ref>()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>d_readers.size();<sp/>}</highlight></codeline>
<codeline lineno="90" refid="classgr__buffer_1a2009bf87ea09dd35abd0f42030911381" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="classgr__buffer__reader" kindref="compound" tooltip="How we keep track of the readers of a gr_buffer.">gr_buffer_reader</ref>*<sp/><ref refid="classgr__buffer_1a2009bf87ea09dd35abd0f42030911381" kindref="member">reader</ref>(</highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>index)<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>d_readers[index];<sp/>}</highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight></codeline>
<codeline lineno="92" refid="classgr__buffer_1ad55c520b62a7ebae0593f7c74fdba745" refkind="member"><highlight class="normal"><sp/><sp/>gruel::mutex<sp/>*<ref refid="classgr__buffer_1ad55c520b62a7ebae0593f7c74fdba745" kindref="member">mutex</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>&amp;d_mutex;<sp/>}</highlight></codeline>
<codeline lineno="93"><highlight class="normal"></highlight></codeline>
<codeline lineno="94" refid="classgr__buffer_1a024cd85cd041d18208b717d38cf67d0c" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="classgr__buffer_1a024cd85cd041d18208b717d38cf67d0c" kindref="member">nitems_written</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>d_abs_write_offset;<sp/>}</highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight></codeline>
<codeline lineno="96" refid="classgr__buffer_1a404f1dda059344e176e8e37e77525978" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/><ref refid="classgr__buffer_1a404f1dda059344e176e8e37e77525978" kindref="member">get_sizeof_item</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>d_sizeof_item;<sp/>}</highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>add_item_tag(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structgr__tag__t" kindref="compound">gr_tag_t</ref><sp/>&amp;tag);</highlight></codeline>
<codeline lineno="104"><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>prune_tags(uint64_t<sp/>max_time);</highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight></codeline>
<codeline lineno="112" refid="classgr__buffer_1adcc2b78e50b043782f070fb741b8e941" refkind="member"><highlight class="normal"><sp/><sp/>std::deque&lt;gr_tag_t&gt;::iterator<sp/><ref refid="classgr__buffer_1adcc2b78e50b043782f070fb741b8e941" kindref="member">get_tags_begin</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>d_item_tags.begin();<sp/>}</highlight></codeline>
<codeline lineno="113" refid="classgr__buffer_1aaed6d72be9df4318038213bd3de747c3" refkind="member"><highlight class="normal"><sp/><sp/>std::deque&lt;gr_tag_t&gt;::iterator<sp/><ref refid="classgr__buffer_1aaed6d72be9df4318038213bd3de747c3" kindref="member">get_tags_end</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>d_item_tags.end();<sp/>}</highlight></codeline>
<codeline lineno="114"><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>-------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"></highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight></codeline>
<codeline lineno="119" refid="classgr__buffer_1a7ecfad759b1fdf2dcb7416a16f563482" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">friend</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classgr__buffer__reader" kindref="compound" tooltip="How we keep track of the readers of a gr_buffer.">gr_buffer_reader</ref>;</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">friend</highlight><highlight class="normal"><sp/>GR_CORE_API<sp/><ref refid="gr__runtime__types_8h_1aeb2e4f10d678dfe34cb51aadd956f988" kindref="member">gr_buffer_sptr</ref><sp/><ref refid="gr__buffer_8h_1aa2ef769ebce37b086c366d798c096307" kindref="member" tooltip="Allocate a buffer that holds at least nitems of size sizeof_item.">gr_make_buffer</ref><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>nitems,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>sizeof_item,<sp/><ref refid="gr__runtime__types_8h_1a0e2b009a3179d6dc1131742e185f910b" kindref="member">gr_block_sptr</ref><sp/><ref refid="classgr__buffer__reader_1acd78edc8986ecdb3b78a3add8e2ebfde" kindref="member" tooltip="Return the block that reads via this reader.">link</ref>);</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">friend</highlight><highlight class="normal"><sp/>GR_CORE_API<sp/><ref refid="gr__runtime__types_8h_1abede94b9a0e48fee7725bb4113b1e5f7" kindref="member">gr_buffer_reader_sptr</ref><sp/><ref refid="gr__buffer_8h_1a9bb17a1adf0efc0fcbdb6c208ca62df1" kindref="member" tooltip="Create a new gr_buffer_reader and attach it to buffer buf.">gr_buffer_add_reader</ref><sp/>(<ref refid="gr__runtime__types_8h_1aeb2e4f10d678dfe34cb51aadd956f988" kindref="member">gr_buffer_sptr</ref><sp/>buf,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>nzero_preload,<sp/><ref refid="gr__runtime__types_8h_1a0e2b009a3179d6dc1131742e185f910b" kindref="member">gr_block_sptr</ref><sp/><ref refid="classgr__buffer__reader_1acd78edc8986ecdb3b78a3add8e2ebfde" kindref="member" tooltip="Return the block that reads via this reader.">link</ref>);</highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="124" refid="classgr__buffer_1a60aa2c93de67e9c5782a34130aac8da3" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<ref refid="classgr__buffer_1a60aa2c93de67e9c5782a34130aac8da3" kindref="member">d_base</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>base<sp/>address<sp/>of<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="125" refid="classgr__buffer_1a2ce1b319068ce94e4799b7affe4b48ae" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classgr__buffer_1a2ce1b319068ce94e4799b7affe4b48ae" kindref="member">d_bufsize</ref>;<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>in<sp/>items</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><ref refid="classgr__vmcircbuf" kindref="compound" tooltip="abstract class to implement doubly mapped virtual memory circular buffers">gr_vmcircbuf</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*d_vmcircbuf;</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>d_sizeof_item;<sp/><sp/></highlight><highlight class="comment">//<sp/>in<sp/>bytes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/>std::vector&lt;gr_buffer_reader<sp/>*&gt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/>d_readers;</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/>boost::weak_ptr&lt;gr_block&gt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>d_link;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>block<sp/>that<sp/>writes<sp/>to<sp/>this<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>mutex<sp/>protects<sp/>d_write_index,<sp/>d_abs_write_offset,<sp/>d_done,<sp/>d_item_tags</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>and<sp/>the<sp/>d_read_index&apos;s<sp/>and<sp/>d_abs_read_offset&apos;s<sp/>in<sp/>the<sp/>buffer<sp/>readers.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/>gruel::mutex<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>d_mutex;</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>d_write_index;<sp/><sp/></highlight><highlight class="comment">//<sp/>in<sp/>items<sp/>[0,d_bufsize)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/>uint64_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>d_abs_write_offset;<sp/></highlight><highlight class="comment">//<sp/>num<sp/>items<sp/>written<sp/>since<sp/>the<sp/>start</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>d_done;</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/>std::deque&lt;gr_tag_t&gt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>d_item_tags;</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/>uint64_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>d_last_min_items_read;</highlight></codeline>
<codeline lineno="142"><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/>index_add<sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>a,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>b)</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>s<sp/>=<sp/>a<sp/>+<sp/>b;</highlight></codeline>
<codeline lineno="147"><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(s<sp/>&gt;=<sp/>d_bufsize)</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>s<sp/>-=<sp/>d_bufsize;</highlight></codeline>
<codeline lineno="150"><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/>assert<sp/>(s<sp/>&lt;<sp/>d_bufsize);</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>s;</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/>index_sub<sp/>(</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>a,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>b)</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>s<sp/>=<sp/>a<sp/>-<sp/>b;</highlight></codeline>
<codeline lineno="159"><highlight class="normal"></highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(s<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>s<sp/>+=<sp/>d_bufsize;</highlight></codeline>
<codeline lineno="162"><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/>assert<sp/>((</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal">)<sp/>s<sp/>&lt;<sp/>d_bufsize);</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>s;</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="166"><highlight class="normal"></highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">virtual</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>allocate_buffer<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>nitems,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>sizeof_item);</highlight></codeline>
<codeline lineno="168"><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><ref refid="classgr__buffer__reader_1a25dff068f5cfde18c4307b4973f4db9d" kindref="member">gr_buffer</ref><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>nitems,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>sizeof_item,<sp/><ref refid="gr__runtime__types_8h_1a0e2b009a3179d6dc1131742e185f910b" kindref="member">gr_block_sptr</ref><sp/><ref refid="classgr__buffer__reader_1acd78edc8986ecdb3b78a3add8e2ebfde" kindref="member" tooltip="Return the block that reads via this reader.">link</ref>);</highlight></codeline>
<codeline lineno="183"><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>drop_reader<sp/>(<ref refid="classgr__buffer__reader" kindref="compound" tooltip="How we keep track of the readers of a gr_buffer.">gr_buffer_reader</ref><sp/>*reader);</highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal">};</highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal">GR_CORE_API<sp/><ref refid="gr__runtime__types_8h_1abede94b9a0e48fee7725bb4113b1e5f7" kindref="member">gr_buffer_reader_sptr</ref></highlight></codeline>
<codeline lineno="198"><highlight class="normal"><ref refid="gr__buffer_8h_1a9bb17a1adf0efc0fcbdb6c208ca62df1" kindref="member" tooltip="Create a new gr_buffer_reader and attach it to buffer buf.">gr_buffer_add_reader</ref><sp/>(<ref refid="gr__runtime__types_8h_1aeb2e4f10d678dfe34cb51aadd956f988" kindref="member">gr_buffer_sptr</ref><sp/>buf,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>nzero_preload,<sp/><ref refid="gr__runtime__types_8h_1a0e2b009a3179d6dc1131742e185f910b" kindref="member">gr_block_sptr</ref><sp/><ref refid="classgr__buffer__reader_1acd78edc8986ecdb3b78a3add8e2ebfde" kindref="member" tooltip="Return the block that reads via this reader.">link</ref>=<ref refid="gr__runtime__types_8h_1a0e2b009a3179d6dc1131742e185f910b" kindref="member">gr_block_sptr</ref>());</highlight></codeline>
<codeline lineno="199"><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal">GR_CORE_API<sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><ref refid="gr__buffer_8h_1a10b6ab0405112ab02f34c95e7b673929" kindref="member" tooltip="returns # of gr_buffers currently allocated">gr_buffer_ncurrently_allocated</ref><sp/>();</highlight></codeline>
<codeline lineno="202"><highlight class="normal"></highlight></codeline>
<codeline lineno="203"><highlight class="normal"></highlight></codeline>
<codeline lineno="204"><highlight class="normal"></highlight><highlight class="comment">//<sp/>---------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"></highlight></codeline>
<codeline lineno="211" refid="classgr__buffer__reader" refkind="compound"><highlight class="keyword">class<sp/></highlight><highlight class="normal">GR_CORE_API<sp/><ref refid="classgr__buffer__reader" kindref="compound" tooltip="How we keep track of the readers of a gr_buffer.">gr_buffer_reader</ref><sp/>{</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="213"><highlight class="normal"></highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/>~<ref refid="classgr__buffer__reader" kindref="compound" tooltip="How we keep track of the readers of a gr_buffer.">gr_buffer_reader</ref><sp/>();</highlight></codeline>
<codeline lineno="215"><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>items_available<sp/>()<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="220"><highlight class="normal"></highlight></codeline>
<codeline lineno="224" refid="classgr__buffer__reader_1aa1f9fc3b86fea8da9cfdb6f693b0d8b1" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="gr__runtime__types_8h_1aeb2e4f10d678dfe34cb51aadd956f988" kindref="member">gr_buffer_sptr</ref><sp/><ref refid="classgr__buffer__reader_1aa1f9fc3b86fea8da9cfdb6f693b0d8b1" kindref="member" tooltip="Return buffer this reader reads from.">buffer</ref><sp/>()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>d_buffer;<sp/>}</highlight></codeline>
<codeline lineno="225"><highlight class="normal"></highlight></codeline>
<codeline lineno="226"><highlight class="normal"></highlight></codeline>
<codeline lineno="231" refid="classgr__buffer__reader_1a87ef46cf000ef6168115b8b06cfd0ce8" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classgr__buffer__reader_1a87ef46cf000ef6168115b8b06cfd0ce8" kindref="member" tooltip="Return maximum number of items that could ever be available for reading. This is used as a sanity che...">max_possible_items_available</ref><sp/>()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>d_buffer-&gt;d_bufsize<sp/>-<sp/>1;<sp/>}</highlight></codeline>
<codeline lineno="232"><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*read_pointer<sp/>();</highlight></codeline>
<codeline lineno="239"><highlight class="normal"></highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="241"><highlight class="comment"><sp/><sp/><sp/>*<sp/>\brief<sp/>tell<sp/>buffer<sp/>we<sp/>read<sp/>\p<sp/>items<sp/>from<sp/>it</highlight></codeline>
<codeline lineno="242"><highlight class="comment"><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>update_read_pointer<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>nitems);</highlight></codeline>
<codeline lineno="244"><highlight class="normal"></highlight></codeline>
<codeline lineno="245" refid="classgr__buffer__reader_1a8b550f828745a575387ead9701174665" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classgr__buffer__reader_1a8b550f828745a575387ead9701174665" kindref="member">set_done</ref><sp/>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>done)<sp/><sp/><sp/>{<sp/>d_buffer-&gt;set_done<sp/>(done);<sp/>}</highlight></codeline>
<codeline lineno="246" refid="classgr__buffer__reader_1a1b0037b814e8576b279fe307c47dd5a5" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classgr__buffer__reader_1a1b0037b814e8576b279fe307c47dd5a5" kindref="member">done</ref><sp/>()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>d_buffer-&gt;done<sp/>();<sp/>}</highlight></codeline>
<codeline lineno="247"><highlight class="normal"></highlight></codeline>
<codeline lineno="248" refid="classgr__buffer__reader_1ad7cab1e800a289bdbb4879f4f3a38873" refkind="member"><highlight class="normal"><sp/><sp/>gruel::mutex<sp/>*<ref refid="classgr__buffer__reader_1ad7cab1e800a289bdbb4879f4f3a38873" kindref="member">mutex</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>d_buffer-&gt;mutex();<sp/>}</highlight></codeline>
<codeline lineno="249"><highlight class="normal"></highlight></codeline>
<codeline lineno="250"><highlight class="normal"></highlight></codeline>
<codeline lineno="251" refid="classgr__buffer__reader_1adfc6222670ba28a359dd1e855a69a6ee" refkind="member"><highlight class="normal"><sp/><sp/>uint64_t<sp/><ref refid="classgr__buffer__reader_1adfc6222670ba28a359dd1e855a69a6ee" kindref="member">nitems_read</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>d_abs_read_offset;<sp/>}</highlight></codeline>
<codeline lineno="252"><highlight class="normal"></highlight></codeline>
<codeline lineno="253" refid="classgr__buffer__reader_1aaff18b837411388f757f7cae21049f52" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/><ref refid="classgr__buffer__reader_1aaff18b837411388f757f7cae21049f52" kindref="member">get_sizeof_item</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>d_buffer-&gt;get_sizeof_item();<sp/>}</highlight></codeline>
<codeline lineno="254"><highlight class="normal"></highlight></codeline>
<codeline lineno="259" refid="classgr__buffer__reader_1acd78edc8986ecdb3b78a3add8e2ebfde" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="gr__runtime__types_8h_1a0e2b009a3179d6dc1131742e185f910b" kindref="member">gr_block_sptr</ref><sp/><ref refid="classgr__buffer__reader_1acd78edc8986ecdb3b78a3add8e2ebfde" kindref="member" tooltip="Return the block that reads via this reader.">link</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="gr__runtime__types_8h_1a0e2b009a3179d6dc1131742e185f910b" kindref="member">gr_block_sptr</ref>(d_link);<sp/>}</highlight></codeline>
<codeline lineno="260"><highlight class="normal"></highlight></codeline>
<codeline lineno="261"><highlight class="normal"></highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>get_tags_in_range(std::vector&lt;gr_tag_t&gt;<sp/>&amp;v,</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint64_t<sp/>abs_start,</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint64_t<sp/>abs_end);</highlight></codeline>
<codeline lineno="277"><highlight class="normal"></highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>-------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal"></highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="281"><highlight class="normal"></highlight></codeline>
<codeline lineno="282" refid="classgr__buffer__reader_1a25dff068f5cfde18c4307b4973f4db9d" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">friend</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classgr__buffer" kindref="compound" tooltip="Single writer, multiple reader fifo.">gr_buffer</ref>;</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">friend</highlight><highlight class="normal"><sp/>GR_CORE_API<sp/><ref refid="gr__runtime__types_8h_1abede94b9a0e48fee7725bb4113b1e5f7" kindref="member">gr_buffer_reader_sptr</ref></highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><ref refid="gr__buffer_8h_1a9bb17a1adf0efc0fcbdb6c208ca62df1" kindref="member" tooltip="Create a new gr_buffer_reader and attach it to buffer buf.">gr_buffer_add_reader</ref><sp/>(<ref refid="gr__runtime__types_8h_1aeb2e4f10d678dfe34cb51aadd956f988" kindref="member">gr_buffer_sptr</ref><sp/>buf,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>nzero_preload,<sp/><ref refid="gr__runtime__types_8h_1a0e2b009a3179d6dc1131742e185f910b" kindref="member">gr_block_sptr</ref><sp/><ref refid="classgr__buffer_1a3e5c410222891cad5b7d5b85ff82b85f" kindref="member" tooltip="Return the block that writes to this buffer.">link</ref>);</highlight></codeline>
<codeline lineno="285"><highlight class="normal"></highlight></codeline>
<codeline lineno="286"><highlight class="normal"></highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><ref refid="gr__runtime__types_8h_1aeb2e4f10d678dfe34cb51aadd956f988" kindref="member">gr_buffer_sptr</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>d_buffer;</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>d_read_index;<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>in<sp/>items<sp/>[0,d-&gt;buffer.d_bufsize)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/>uint64_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>d_abs_read_offset;<sp/><sp/></highlight><highlight class="comment">//<sp/>num<sp/>items<sp/>seen<sp/>since<sp/>the<sp/>start</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/>boost::weak_ptr&lt;gr_block&gt;<sp/><sp/><sp/><sp/><sp/>d_link;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>block<sp/>that<sp/>reads<sp/>via<sp/>this<sp/>buffer<sp/>reader</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="291"><highlight class="normal"></highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><ref refid="classgr__buffer_1a7ecfad759b1fdf2dcb7416a16f563482" kindref="member">gr_buffer_reader</ref><sp/>(<ref refid="gr__runtime__types_8h_1aeb2e4f10d678dfe34cb51aadd956f988" kindref="member">gr_buffer_sptr</ref><sp/>buffer,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>read_index,<sp/><ref refid="gr__runtime__types_8h_1a0e2b009a3179d6dc1131742e185f910b" kindref="member">gr_block_sptr</ref><sp/><ref refid="classgr__buffer_1a3e5c410222891cad5b7d5b85ff82b85f" kindref="member" tooltip="Return the block that writes to this buffer.">link</ref>);</highlight></codeline>
<codeline lineno="294"><highlight class="normal">};</highlight></codeline>
<codeline lineno="295"><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal">GR_CORE_API<sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/><ref refid="gr__buffer_8h_1a12660a6c74c7e961f84c2ea8e8df7543" kindref="member" tooltip="returns # of gr_buffer_readers currently allocated">gr_buffer_reader_ncurrently_allocated</ref><sp/>();</highlight></codeline>
<codeline lineno="298"><highlight class="normal"></highlight></codeline>
<codeline lineno="299"><highlight class="normal"></highlight></codeline>
<codeline lineno="300"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>INCLUDED_GR_BUFFER_H<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="/home/alexzh/gr_alex/gnuradio/gnuradio-core/src/lib/runtime/gr_buffer.h"/>
  </compounddef>
</doxygen>
