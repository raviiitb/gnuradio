<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>GNU Radio 3.6.1git-182-gab9a06f0 C++ API: UHD Interface</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">GNU Radio 3.6.1git-182-gab9a06f0 C++ API
   
   </div>
   
  </td>
  
  
  
   
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('page_uhd.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">UHD Interface </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="Introduction"></a>
Introduction</h2>
<p>This is the GNU Radio UHD package. It is the interface to the UHD library to connect to and send and receive data between the Ettus Research, LLC product line. To use the UHD blocks, the Python namespaces is in gnuradio.uhd, which would be normally imported as:</p>
<div class="fragment"><pre class="fragment">    from gnuradio <span class="keyword">import</span> uhd
</pre></div><p>The relevant blocks are listed in the <a class="el" href="group__uhd__blk.html">UHD Interface</a> group.</p>
<p>A quick listing of the details can be found in Python after importing by using:</p>
<div class="fragment"><pre class="fragment">    help(uhd)
</pre></div><h2><a class="anchor" id="External"></a>
Documentation</h2>
<p>Ettus Research keeps the comprehensive documentation to the underlying UHD driver, which can be found:</p>
<p><a href="http://files.ettus.com/uhd_docs/manual/html/">http://files.ettus.com/uhd_docs/manual/html/</a></p>
<p>The UHD Doxygen page is located:</p>
<p><a href="http://files.ettus.com/uhd_docs/doxygen/html/index.html">http://files.ettus.com/uhd_docs/doxygen/html/index.html</a></p>
<h2><a class="anchor" id="Typical"></a>
Setup</h2>
<p>A typical option parser setup for a UHD device looks like</p>
<div class="fragment"><pre class="fragment">    parser = OptionParser(option_class=eng_option)
    parser.add_option(&quot;-a&quot;, &quot;--args&quot;, type=&quot;<span class="keywordtype">string</span>&quot;, default=&quot;&quot;,
                      help=&quot;UHD device address args , [default=%default]&quot;)
    parser.add_option(&quot;&quot;, &quot;--spec&quot;, type=&quot;<span class="keywordtype">string</span>&quot;, default=None,
                      help=&quot;Subdevice of UHD device where appropriate&quot;)
    parser.add_option(&quot;-A&quot;, &quot;--antenna&quot;, type=&quot;<span class="keywordtype">string</span>&quot;, default=None,
                      help=&quot;select Rx Antenna where appropriate&quot;)
    parser.add_option(&quot;-s&quot;, &quot;--samp-rate&quot;, type=&quot;eng_float&quot;, default=1e6,
                      help=&quot;set sample rate (bandwidth) [default=%default]&quot;)
    parser.add_option(&quot;-f&quot;, &quot;--freq&quot;, type=&quot;eng_float&quot;, default=None,
                      help=&quot;set frequency to FREQ&quot;, metavar=&quot;FREQ&quot;)
    parser.add_option(&quot;-g&quot;, &quot;--gain&quot;, type=&quot;eng_float&quot;, default=None,
                      help=&quot;set gain in dB (default is midpoint)&quot;)
</pre></div><p>To use these options to create a UHD source object:</p>
<div class="fragment"><pre class="fragment">    <span class="keyword">self</span>.u = uhd.usrp_source(device_addr=options.args,
                             io_type=uhd.io_type.COMPLEX_FLOAT32,
                             num_channels=1)

    <span class="keyword">self</span>.u.set_samp_rate(options.samp_rate)

<span class="preprocessor">    # if no gain was specified, use the mid-point in dB</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> options.gain is None:
        g = <span class="keyword">self</span>.u.get_gain_range()
        options.gain = float(g.start()+g.stop())/2
    <span class="keyword">self</span>.u.set_gain(options.gain, 0)

<span class="preprocessor">    # Set the center frequency</span>
<span class="preprocessor"></span>    <span class="keyword">self</span>.u.set_center_freq(options.freq, 0)

<span class="preprocessor">    # Set the subdevice spec</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span>(options.spec):
        <span class="keyword">self</span>.u.set_subdev_spec(options.spec, 0)

<span class="preprocessor">     # Set the antenna</span>
<span class="preprocessor"></span>     <span class="keywordflow">if</span>(options.antenna):
        <span class="keyword">self</span>.u.set_antenna(options.antenna, 0)
</pre></div><p>Frequently, your application may need a sample rate that is not supported by the UHD device. If you have extra CPU power to spare, you can easily set the sample rate you want, then ask the device what the actual sample rate set was. Then, you can easily create an arbitrary resampler to take care of the difference.</p>
<div class="fragment"><pre class="fragment">    <span class="keyword">self</span>.u.set_samp_rate(options.samp_rate)

    desired_rate = options.samp_rate
    actual_rate = <span class="keyword">self</span>.u.get_samp_rate()
    resample = desired_rate / actual_rate

<span class="preprocessor">    # Use the blks2 version and pass only the resample factor.</span>
<span class="preprocessor"></span><span class="preprocessor">    # This block builds a half-band filter for you</span>
<span class="preprocessor"></span>
    <span class="keyword">self</span>.resampler = blks2.pfb_arb_resampler_ccf(resample)
</pre></div> </div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>

    <li class="footer">Generated on Tue Jun 5 2012 16:56:55 for GNU Radio 3.6.1git-182-gab9a06f0 C++ API by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
