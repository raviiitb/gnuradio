<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>GNU Radio 3.6.1git-182-gab9a06f0 C++ API: digital_pfb_clock_sync_fff Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">GNU Radio 3.6.1git-182-gab9a06f0 C++ API
   
   </div>
   
  </td>
  
  
  
   
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classdigital__pfb__clock__sync__fff.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<div class="title">digital_pfb_clock_sync_fff Class Reference<div class="ingroups"><a class="el" href="group__filter__blk.html">Filters</a> &#124; <a class="el" href="group__pfb__blk.html">Polyphase Filterbank</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="digital_pfb_clock_sync_fff" --><!-- doxytag: inherits="gr_block" -->
<p>Timing synchronizer using polyphase filterbanks.  
 <a href="classdigital__pfb__clock__sync__fff.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="digital__pfb__clock__sync__fff_8h_source.html">digital_pfb_clock_sync_fff.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for digital_pfb_clock_sync_fff:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classdigital__pfb__clock__sync__fff.png" usemap="#digital_pfb_clock_sync_fff_map" alt=""/>
  <map id="digital_pfb_clock_sync_fff_map" name="digital_pfb_clock_sync_fff_map">
<area href="classgr__block.html" title="The abstract base class for all &#39;terminal&#39; processing blocks.A signal processing flow is constructed ..." alt="gr_block" shape="rect" coords="0,168,160,192"/>
<area href="classgr__basic__block.html" title="The abstract base class for all signal processing blocks.Basic blocks are the bare abstraction of an ..." alt="gr_basic_block" shape="rect" coords="0,112,160,136"/>
<area href="classgr__msg__accepter.html" title="Accepts messages and inserts them into a message queue, then notifies subclass gr_basic_block there i..." alt="gr_msg_accepter" shape="rect" coords="0,56,160,80"/>
<area href="classgruel_1_1msg__accepter.html" title="Virtual base class that accepts messages." alt="gruel::msg_accepter" shape="rect" coords="0,0,160,24"/>
</map>
 </div></div>

<p><a href="classdigital__pfb__clock__sync__fff-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#a3f97e29dc1560ca63384f78922a41ceb">~digital_pfb_clock_sync_fff</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="volk_8tmpl_8h.html#a8dc2b7da310a28e667530ba0e8ca4cc4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#ac77fc7e223e6eb29c3827f465352833d">update_gains</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">update the system gains from omega and eta  <a href="#ac77fc7e223e6eb29c3827f465352833d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="volk_8tmpl_8h.html#a8dc2b7da310a28e667530ba0e8ca4cc4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#aeeb406b96d0afa3fbe743701d7e5bdd5">set_taps</a> (const std::vector&lt; float &gt; &amp;<a class="el" href="interpolator__taps_8h.html#a30bf032e13c2a9fc4a98e14e390cd65a">taps</a>, std::vector&lt; std::vector&lt; float &gt; &gt; &amp;ourtaps, std::vector&lt; gr_fir_fff * &gt; &amp;ourfilter)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; float &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#a2e30f47e30f3620961d9b4b0d139d2d5">get_taps</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; float &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#a37586b0c015a1fd0eac621a23175c442">get_diff_taps</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#acbe2b34e33006c2351ab0e91cce8d4df">get_channel_taps</a> (int channel)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#a188900538885120494882eecaefdf147">get_diff_channel_taps</a> (int channel)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#a05bad8f23c59174d0ce39a79d1161b11">get_taps_as_string</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#a110cb0b82ad9d507a231c29c4fdb155d">get_diff_taps_as_string</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="volk_8tmpl_8h.html#a8dc2b7da310a28e667530ba0e8ca4cc4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#ae5734752f98624aedc0dbb1970859990">set_loop_bandwidth</a> (float bw)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the loop bandwidth.  <a href="#ae5734752f98624aedc0dbb1970859990"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="volk_8tmpl_8h.html#a8dc2b7da310a28e667530ba0e8ca4cc4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#a16f01854dd9f4dc36e4deb9eab45a236">set_damping_factor</a> (float df)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the loop damping factor.  <a href="#a16f01854dd9f4dc36e4deb9eab45a236"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="volk_8tmpl_8h.html#a8dc2b7da310a28e667530ba0e8ca4cc4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#aa471d30941c8b565000d2c47305fd55b">set_alpha</a> (float alpha)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the loop gain alpha.  <a href="#aa471d30941c8b565000d2c47305fd55b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="volk_8tmpl_8h.html#a8dc2b7da310a28e667530ba0e8ca4cc4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#ab698bb407e9e231d9cbd2d60f3fb538e">set_beta</a> (float beta)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the loop gain beta.  <a href="#ab698bb407e9e231d9cbd2d60f3fb538e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="volk_8tmpl_8h.html#a8dc2b7da310a28e667530ba0e8ca4cc4">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#a8ba7133e390389076193a7d9e9057324">set_max_rate_deviation</a> (float m)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#a355f8fb54f69507af0ec364c04576bd3">get_loop_bandwidth</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the loop bandwidth.  <a href="#a355f8fb54f69507af0ec364c04576bd3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#aebf73dcfdbbdd896b2db3323473cb795">get_damping_factor</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the loop damping factor.  <a href="#aebf73dcfdbbdd896b2db3323473cb795"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#ae8bac8fb1e3f797b54a26e6866d66308">get_alpha</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the loop gain alpha.  <a href="#ae8bac8fb1e3f797b54a26e6866d66308"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#a815d544eb7c75c061f0e784a2833c0ad">get_beta</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the loop gain beta.  <a href="#a815d544eb7c75c061f0e784a2833c0ad"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#a3751754fe2e9be5bf3c92d621025b6e4">get_clock_rate</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current clock rate.  <a href="#a3751754fe2e9be5bf3c92d621025b6e4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#a84beda67e942a29432dd1b82ae526ad4">check_topology</a> (int ninputs, int noutputs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Confirm that ninputs and noutputs is an acceptable combination.  <a href="#a84beda67e942a29432dd1b82ae526ad4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#a6710ad08b7ffd10d0ae1974b9208202c">general_work</a> (int noutput_items, <a class="el" href="gr__types_8h.html#ab02d0a829d67d39e3ac3163016d3a8be">gr_vector_int</a> &amp;ninput_items, <a class="el" href="gr__types_8h.html#a9852a3d906d823cb70eb9c29e7f2a43d">gr_vector_const_void_star</a> &amp;input_items, <a class="el" href="gr__types_8h.html#acd3f499576e769966ea44554b359d949">gr_vector_void_star</a> &amp;output_items)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">compute output items from input items  <a href="#a6710ad08b7ffd10d0ae1974b9208202c"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="digital__api_8h.html#ae14969f36ec69051c4b2f13a0db7e9ba">DIGITAL_API</a> <br class="typebreak"/>
<a class="el" href="classboost_1_1shared__ptr.html">digital_pfb_clock_sync_fff_sptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigital__pfb__clock__sync__fff.html#a5c83026ee01559c72c66efaaf3f26407">digital_make_pfb_clock_sync_fff</a> (double sps, float gain, const std::vector&lt; float &gt; &amp;<a class="el" href="interpolator__taps_8h.html#a30bf032e13c2a9fc4a98e14e390cd65a">taps</a>, unsigned int filter_size, float init_phase, float max_rate_deviation, int osps)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Timing synchronizer using polyphase filterbanks. </p>
<p>This block performs timing synchronization for PAM signals by minimizing the derivative of the filtered signal, which in turn maximizes the SNR and minimizes ISI.</p>
<p>This approach works by setting up two filterbanks; one filterbank contains the signal's pulse shaping matched filter (such as a root raised cosine filter), where each branch of the filterbank contains a different phase of the filter. The second filterbank contains the derivatives of the filters in the first filterbank. Thinking of this in the time domain, the first filterbank contains filters that have a sinc shape to them. We want to align the output signal to be sampled at exactly the peak of the sinc shape. The derivative of the sinc contains a zero at the maximum point of the sinc (sinc(0) = 1, sinc(0)' = 0). Furthermore, the region around the zero point is relatively linear. We make use of this fact to generate the error signal.</p>
<p>If the signal out of the derivative filters is d_i[n] for the ith filter, and the output of the matched filter is x_i[n], we calculate the error as: e[n] = (Re{x_i[n]} * Re{d_i[n]} + Im{x_i[n]} * Im{d_i[n]}) / 2.0 This equation averages the error in the real and imaginary parts. There are two reasons we multiply by the signal itself. First, if the symbol could be positive or negative going, but we want the error term to always tell us to go in the same direction depending on which side of the zero point we are on. The sign of x_i[n] adjusts the error term to do this. Second, the magnitude of x_i[n] scales the error term depending on the symbol's amplitude, so larger signals give us a stronger error term because we have more confidence in that symbol's value. Using the magnitude of x_i[n] instead of just the sign is especially good for signals with low SNR.</p>
<p>The error signal, e[n], gives us a value proportional to how far away from the zero point we are in the derivative signal. We want to drive this value to zero, so we set up a second order loop. We have two variables for this loop; d_k is the filter number in the filterbank we are on and d_rate is the rate which we travel through the filters in the steady state. That is, due to the natural clock differences between the transmitter and receiver, d_rate represents that difference and would traverse the filter phase paths to keep the receiver locked. Thinking of this as a second-order PLL, the d_rate is the frequency and d_k is the phase. So we update d_rate and d_k using the standard loop equations based on two error signals, d_alpha and d_beta. We have these two values set based on each other for a critically damped system, so in the block constructor, we just ask for "gain," which is d_alpha while d_beta is equal to (gain^2)/4.</p>
<p>The block's parameters are:</p>
<ul>
<li><code>sps:</code> The clock sync block needs to know the number of samples per symbol, because it defaults to return a single point representing the symbol. The sps can be any positive real number and does not need to be an integer.</li>
</ul>
<ul>
<li><code>loop_bw:</code> The loop bandwidth is used to set the gain of the inner control loop (see: <a href="http://gnuradio.squarespace.com/blog/2011/8/13/control-loop-gain-values.html">http://gnuradio.squarespace.com/blog/2011/8/13/control-loop-gain-values.html</a>). This should be set small (a value of around 2pi/100 is suggested in that blog post as the step size for the number of radians around the unit circle to move relative to the error).</li>
</ul>
<ul>
<li><code>taps:</code> One of the most important parameters for this block is the taps of the filter. One of the benefits of this algorithm is that you can put the matched filter in here as the taps, so you get both the matched filter and sample timing correction in one go. So create your normal matched filter. For a typical digital modulation, this is a root raised cosine filter. The number of taps of this filter is based on how long you expect the channel to be; that is, how many symbols do you want to combine to get the current symbols energy back (there's probably a better way of stating that). It's usually 5 to 10 or so. That gives you your filter, but now we need to think about it as a filter with different phase profiles in each filter. So take this number of taps and multiply it by the number of filters. This is the number you would use to create your prototype filter. When you use this in the PFB filerbank, it segments these taps into the filterbanks in such a way that each bank now represents the filter at different phases, equally spaced at 2pi/N, where N is the number of filters.</li>
</ul>
<ul>
<li><code>filter_size</code> (default=32): The number of filters can also be set and defaults to 32. With 32 filters, you get a good enough resolution in the phase to produce very small, almost unnoticeable, ISI. Going to 64 filters can reduce this more, but after that there is very little gained for the extra complexity.</li>
</ul>
<ul>
<li><code>init_phase</code> (default=0): The initial phase is another settable parameter and refers to the filter path the algorithm initially looks at (i.e., d_k starts at init_phase). This value defaults to zero, but it might be useful to start at a different phase offset, such as the mid-point of the filters.</li>
</ul>
<ul>
<li><code>max_rate_deviation</code> (default=1.5): The next parameter is the max_rate_devitation, which defaults to 1.5. This is how far we allow d_rate to swing, positive or negative, from 0. Constraining the rate can help keep the algorithm from walking too far away to lock during times when there is no signal.</li>
</ul>
<ul>
<li><code>osps</code> (default=1): The osps is the number of output samples per symbol. By default, the algorithm produces 1 sample per symbol, sampled at the exact sample value. This osps value was added to better work with equalizers, which do a better job of modeling the channel if they have 2 samps/sym. </li>
</ul>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a3f97e29dc1560ca63384f78922a41ceb"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::~digital_pfb_clock_sync_fff" ref="a3f97e29dc1560ca63384f78922a41ceb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdigital__pfb__clock__sync__fff.html#a3f97e29dc1560ca63384f78922a41ceb">digital_pfb_clock_sync_fff::~digital_pfb_clock_sync_fff</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a84beda67e942a29432dd1b82ae526ad4"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::check_topology" ref="a84beda67e942a29432dd1b82ae526ad4" args="(int ninputs, int noutputs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classdigital__pfb__clock__sync__fff.html#a84beda67e942a29432dd1b82ae526ad4">digital_pfb_clock_sync_fff::check_topology</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ninputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>noutputs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Confirm that ninputs and noutputs is an acceptable combination. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ninputs</td><td>number of input streams connected </td></tr>
    <tr><td class="paramname">noutputs</td><td>number of output streams connected</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if this is a valid configuration for this block.</dd></dl>
<p>This function is called by the runtime system whenever the topology changes. Most classes do not need to override this. This check is in addition to the constraints specified by the input and output gr_io_signatures. </p>

<p>Reimplemented from <a class="el" href="classgr__basic__block.html#a50a714df9c3ce8c03854a09ac84e589b">gr_basic_block</a>.</p>

</div>
</div>
<a class="anchor" id="a6710ad08b7ffd10d0ae1974b9208202c"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::general_work" ref="a6710ad08b7ffd10d0ae1974b9208202c" args="(int noutput_items, gr_vector_int &amp;ninput_items, gr_vector_const_void_star &amp;input_items, gr_vector_void_star &amp;output_items)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classdigital__pfb__clock__sync__fff.html#a6710ad08b7ffd10d0ae1974b9208202c">digital_pfb_clock_sync_fff::general_work</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>noutput_items</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="gr__types_8h.html#ab02d0a829d67d39e3ac3163016d3a8be">gr_vector_int</a> &amp;&#160;</td>
          <td class="paramname"><em>ninput_items</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="gr__types_8h.html#a9852a3d906d823cb70eb9c29e7f2a43d">gr_vector_const_void_star</a> &amp;&#160;</td>
          <td class="paramname"><em>input_items</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="gr__types_8h.html#acd3f499576e769966ea44554b359d949">gr_vector_void_star</a> &amp;&#160;</td>
          <td class="paramname"><em>output_items</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>compute output items from input items </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">noutput_items</td><td>number of output items to write on each output stream </td></tr>
    <tr><td class="paramname">ninput_items</td><td>number of input items available on each input stream </td></tr>
    <tr><td class="paramname">input_items</td><td>vector of pointers to the input items, one entry per input stream </td></tr>
    <tr><td class="paramname">output_items</td><td>vector of pointers to the output items, one entry per output stream</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of items actually written to each output stream, or -1 on EOF. It is OK to return a value less than noutput_items. -1 &lt;= return value &lt;= noutput_items</dd></dl>
<p>general_work must call consume or consume_each to indicate how many items were consumed on each input stream. </p>

<p>Implements <a class="el" href="classgr__block.html#a137b93d87dc83bbdb6369d33f4ea8197">gr_block</a>.</p>

</div>
</div>
<a class="anchor" id="ae8bac8fb1e3f797b54a26e6866d66308"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::get_alpha" ref="ae8bac8fb1e3f797b54a26e6866d66308" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classdigital__pfb__clock__sync__fff.html#ae8bac8fb1e3f797b54a26e6866d66308">digital_pfb_clock_sync_fff::get_alpha</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the loop gain alpha. </p>

</div>
</div>
<a class="anchor" id="a815d544eb7c75c061f0e784a2833c0ad"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::get_beta" ref="a815d544eb7c75c061f0e784a2833c0ad" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classdigital__pfb__clock__sync__fff.html#a815d544eb7c75c061f0e784a2833c0ad">digital_pfb_clock_sync_fff::get_beta</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the loop gain beta. </p>

</div>
</div>
<a class="anchor" id="acbe2b34e33006c2351ab0e91cce8d4df"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::get_channel_taps" ref="acbe2b34e33006c2351ab0e91cce8d4df" args="(int channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;float&gt; <a class="el" href="classdigital__pfb__clock__sync__fff.html#acbe2b34e33006c2351ab0e91cce8d4df">digital_pfb_clock_sync_fff::get_channel_taps</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the taps of the matched filter for a particular channel </p>

</div>
</div>
<a class="anchor" id="a3751754fe2e9be5bf3c92d621025b6e4"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::get_clock_rate" ref="a3751754fe2e9be5bf3c92d621025b6e4" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classdigital__pfb__clock__sync__fff.html#a3751754fe2e9be5bf3c92d621025b6e4">digital_pfb_clock_sync_fff::get_clock_rate</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the current clock rate. </p>

</div>
</div>
<a class="anchor" id="aebf73dcfdbbdd896b2db3323473cb795"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::get_damping_factor" ref="aebf73dcfdbbdd896b2db3323473cb795" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classdigital__pfb__clock__sync__fff.html#aebf73dcfdbbdd896b2db3323473cb795">digital_pfb_clock_sync_fff::get_damping_factor</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the loop damping factor. </p>

</div>
</div>
<a class="anchor" id="a188900538885120494882eecaefdf147"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::get_diff_channel_taps" ref="a188900538885120494882eecaefdf147" args="(int channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;float&gt; <a class="el" href="classdigital__pfb__clock__sync__fff.html#a188900538885120494882eecaefdf147">digital_pfb_clock_sync_fff::get_diff_channel_taps</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the taps in the derivative filter for a particular channel </p>

</div>
</div>
<a class="anchor" id="a37586b0c015a1fd0eac621a23175c442"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::get_diff_taps" ref="a37586b0c015a1fd0eac621a23175c442" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt;float&gt; &gt; <a class="el" href="classdigital__pfb__clock__sync__fff.html#a37586b0c015a1fd0eac621a23175c442">digital_pfb_clock_sync_fff::get_diff_taps</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns all of the taps of the derivative filter </p>

</div>
</div>
<a class="anchor" id="a110cb0b82ad9d507a231c29c4fdb155d"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::get_diff_taps_as_string" ref="a110cb0b82ad9d507a231c29c4fdb155d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classdigital__pfb__clock__sync__fff.html#a110cb0b82ad9d507a231c29c4fdb155d">digital_pfb_clock_sync_fff::get_diff_taps_as_string</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the derivative filter taps as a formatted string for printing </p>

</div>
</div>
<a class="anchor" id="a355f8fb54f69507af0ec364c04576bd3"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::get_loop_bandwidth" ref="a355f8fb54f69507af0ec364c04576bd3" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classdigital__pfb__clock__sync__fff.html#a355f8fb54f69507af0ec364c04576bd3">digital_pfb_clock_sync_fff::get_loop_bandwidth</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the loop bandwidth. </p>

</div>
</div>
<a class="anchor" id="a2e30f47e30f3620961d9b4b0d139d2d5"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::get_taps" ref="a2e30f47e30f3620961d9b4b0d139d2d5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::vector&lt;float&gt; &gt; <a class="el" href="classdigital__pfb__clock__sync__fff.html#a2e30f47e30f3620961d9b4b0d139d2d5">digital_pfb_clock_sync_fff::get_taps</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns all of the taps of the matched filter </p>

</div>
</div>
<a class="anchor" id="a05bad8f23c59174d0ce39a79d1161b11"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::get_taps_as_string" ref="a05bad8f23c59174d0ce39a79d1161b11" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classdigital__pfb__clock__sync__fff.html#a05bad8f23c59174d0ce39a79d1161b11">digital_pfb_clock_sync_fff::get_taps_as_string</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the taps as a formatted string for printing </p>

</div>
</div>
<a class="anchor" id="aa471d30941c8b565000d2c47305fd55b"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::set_alpha" ref="aa471d30941c8b565000d2c47305fd55b" args="(float alpha)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="volk_8tmpl_8h.html#a8dc2b7da310a28e667530ba0e8ca4cc4">void</a> <a class="el" href="classdigital__pfb__clock__sync__fff.html#aa471d30941c8b565000d2c47305fd55b">digital_pfb_clock_sync_fff::set_alpha</a> </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>alpha</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the loop gain alpha. </p>
<p>Set's the loop filter's alpha gain parameter.</p>
<p>This value should really only be set by adjusting the loop bandwidth and damping factor.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">alpha</td><td>(float) new alpha gain </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab698bb407e9e231d9cbd2d60f3fb538e"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::set_beta" ref="ab698bb407e9e231d9cbd2d60f3fb538e" args="(float beta)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="volk_8tmpl_8h.html#a8dc2b7da310a28e667530ba0e8ca4cc4">void</a> <a class="el" href="classdigital__pfb__clock__sync__fff.html#ab698bb407e9e231d9cbd2d60f3fb538e">digital_pfb_clock_sync_fff::set_beta</a> </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>beta</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the loop gain beta. </p>
<p>Set's the loop filter's beta gain parameter.</p>
<p>This value should really only be set by adjusting the loop bandwidth and damping factor.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">beta</td><td>(float) new beta gain </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a16f01854dd9f4dc36e4deb9eab45a236"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::set_damping_factor" ref="a16f01854dd9f4dc36e4deb9eab45a236" args="(float df)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="volk_8tmpl_8h.html#a8dc2b7da310a28e667530ba0e8ca4cc4">void</a> <a class="el" href="classdigital__pfb__clock__sync__fff.html#a16f01854dd9f4dc36e4deb9eab45a236">digital_pfb_clock_sync_fff::set_damping_factor</a> </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>df</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the loop damping factor. </p>
<p>Set the loop filter's damping factor to <code>df</code>. The damping factor should be sqrt(2)/2.0 for critically damped systems. Set it to anything else only if you know what you are doing. It must be a number between 0 and 1.</p>
<p>When a new damping factor is set, the gains, alpha and beta, of the loop are recalculated by a call to <a class="el" href="classdigital__pfb__clock__sync__fff.html#ac77fc7e223e6eb29c3827f465352833d" title="update the system gains from omega and eta">update_gains()</a>.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">df</td><td>(float) new damping factor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae5734752f98624aedc0dbb1970859990"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::set_loop_bandwidth" ref="ae5734752f98624aedc0dbb1970859990" args="(float bw)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="volk_8tmpl_8h.html#a8dc2b7da310a28e667530ba0e8ca4cc4">void</a> <a class="el" href="classdigital__pfb__clock__sync__fff.html#ae5734752f98624aedc0dbb1970859990">digital_pfb_clock_sync_fff::set_loop_bandwidth</a> </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>bw</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the loop bandwidth. </p>
<p>Set the loop filter's bandwidth to <code>bw</code>. This should be between 2*pi/200 and 2*pi/100 (in rads/samp). It must also be a positive number.</p>
<p>When a new damping factor is set, the gains, alpha and beta, of the loop are recalculated by a call to <a class="el" href="classdigital__pfb__clock__sync__fff.html#ac77fc7e223e6eb29c3827f465352833d" title="update the system gains from omega and eta">update_gains()</a>.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">bw</td><td>(float) new bandwidth </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8ba7133e390389076193a7d9e9057324"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::set_max_rate_deviation" ref="a8ba7133e390389076193a7d9e9057324" args="(float m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="volk_8tmpl_8h.html#a8dc2b7da310a28e667530ba0e8ca4cc4">void</a> <a class="el" href="classdigital__pfb__clock__sync__fff.html#a8ba7133e390389076193a7d9e9057324">digital_pfb_clock_sync_fff::set_max_rate_deviation</a> </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the maximum deviation from 0 d_rate can have </p>

</div>
</div>
<a class="anchor" id="aeeb406b96d0afa3fbe743701d7e5bdd5"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::set_taps" ref="aeeb406b96d0afa3fbe743701d7e5bdd5" args="(const std::vector&lt; float &gt; &amp;taps, std::vector&lt; std::vector&lt; float &gt; &gt; &amp;ourtaps, std::vector&lt; gr_fir_fff * &gt; &amp;ourfilter)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="volk_8tmpl_8h.html#a8dc2b7da310a28e667530ba0e8ca4cc4">void</a> <a class="el" href="classdigital__pfb__clock__sync__fff.html#aeeb406b96d0afa3fbe743701d7e5bdd5">digital_pfb_clock_sync_fff::set_taps</a> </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; float &gt; &amp;&#160;</td>
          <td class="paramname"><em>taps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::vector&lt; float &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>ourtaps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; gr_fir_fff * &gt; &amp;&#160;</td>
          <td class="paramname"><em>ourfilter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Resets the filterbank's filter taps with the new prototype filter </p>

</div>
</div>
<a class="anchor" id="ac77fc7e223e6eb29c3827f465352833d"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::update_gains" ref="ac77fc7e223e6eb29c3827f465352833d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="volk_8tmpl_8h.html#a8dc2b7da310a28e667530ba0e8ca4cc4">void</a> <a class="el" href="classdigital__pfb__clock__sync__fff.html#ac77fc7e223e6eb29c3827f465352833d">digital_pfb_clock_sync_fff::update_gains</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>update the system gains from omega and eta </p>
<p>This function updates the system gains based on the loop bandwidth and damping factor of the system. These two factors can be set separately through their own set functions. </p>

</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="a5c83026ee01559c72c66efaaf3f26407"></a><!-- doxytag: member="digital_pfb_clock_sync_fff::digital_make_pfb_clock_sync_fff" ref="a5c83026ee01559c72c66efaaf3f26407" args="(double sps, float gain, const std::vector&lt; float &gt; &amp;taps, unsigned int filter_size, float init_phase, float max_rate_deviation, int osps)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="digital__api_8h.html#ae14969f36ec69051c4b2f13a0db7e9ba">DIGITAL_API</a> <a class="el" href="classboost_1_1shared__ptr.html">digital_pfb_clock_sync_fff_sptr</a> <a class="el" href="classdigital__pfb__clock__sync__fff.html#a5c83026ee01559c72c66efaaf3f26407">digital_make_pfb_clock_sync_fff</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>sps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>gain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; float &gt; &amp;&#160;</td>
          <td class="paramname"><em>taps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>filter_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>init_phase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>max_rate_deviation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>osps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Build the polyphase filterbank timing synchronizer. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sps</td><td>(double) The number of samples per second in the incoming signal </td></tr>
    <tr><td class="paramname">gain</td><td>(float) The alpha gain of the control loop; beta = (gain^2)/4 by default. </td></tr>
    <tr><td class="paramname">taps</td><td>(vector&lt;int&gt;) The filter taps. </td></tr>
    <tr><td class="paramname">filter_size</td><td>(uint) The number of filters in the filterbank (default = 32). </td></tr>
    <tr><td class="paramname">init_phase</td><td>(float) The initial phase to look at, or which filter to start with (default = 0). </td></tr>
    <tr><td class="paramname">max_rate_deviation</td><td>(float) Distance from 0 d_rate can get (default = 1.5). </td></tr>
    <tr><td class="paramname">osps</td><td>(int) The number of output samples per symbol (default=1). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="digital__pfb__clock__sync__fff_8h_source.html">digital_pfb_clock_sync_fff.h</a></li>
</ul>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="classdigital__pfb__clock__sync__fff.html">digital_pfb_clock_sync_fff</a>      </li>

    <li class="footer">Generated on Tue Jun 5 2012 16:56:56 for GNU Radio 3.6.1git-182-gab9a06f0 C++ API by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
